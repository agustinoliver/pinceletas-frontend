<footer class="footer bg-dark text-light py-4 mt-auto">
  <div class="container">
    <div class="row">
      <!-- Pinceletas - Información de Contacto -->
      <div class="col-lg-3 col-md-6 mb-4">
        <h5 class="fw-bold">{{tiendaConfig?.nombre || 'Pinceletas'}}</h5>
        <p class="mb-1">
          <i class="fas fa-map-marker-alt me-2"></i>
          {{tiendaConfig?.direccion || 'Dirección no configurada'}}
        </p>
        <p class="mb-1">
          <i class="fas fa-phone me-2"></i>
          {{tiendaConfig?.telefono || 'Teléfono no configurado'}}
        </p>
        <p class="mb-0">
          <i class="fas fa-envelope me-2"></i>
          {{tiendaConfig?.email || 'Email no configurado'}}
        </p>
      </div>

      <!-- Enlaces -->
      <div class="col-lg-2 col-md-6 mb-4">
        <h5 class="fw-bold">Enlaces</h5>
        <ul class="list-unstyled">
          <li><a routerLink="/productlist" class="text-light text-decoration-none">Productos</a></li>
          <li><a routerLink="/login" class="text-light text-decoration-none">Iniciar Sesión</a></li>
          <li><a routerLink="/register" class="text-light text-decoration-none">Registrarse</a></li>
        </ul>
      </div>

      <!-- Términos y Condiciones - CAMBIAR ESTA SECCIÓN -->
      <div class="col-lg-2 col-md-6 mb-4">
        <h5 class="fw-bold">Términos y Condiciones</h5>
        <ul class="list-unstyled">
          <li>
            <a class="text-light text-decoration-none footer-link" 
               (click)="mostrarPolitica('terminos')">
              Términos de Servicio
            </a>
          </li>
          <li>
            <a class="text-light text-decoration-none footer-link" 
               (click)="mostrarPolitica('privacidad')">
              Política de Privacidad
            </a>
          </li>
        </ul>
      </div>

      <!-- Síguenos -->
      <div class="col-lg-2 col-md-6 mb-4">
        <h5 class="fw-bold">Síguenos</h5>
        <div class="d-flex gap-3">
          <a href="https://www.instagram.com/pinceletas.cba/" target="_blank" class="text-light fs-5 social-icon">
            <i class="fab fa-instagram"></i>
          </a>
        </div>
      </div>

      <!-- Comunicate con nosotros -->
      <div class="col-lg-3 col-md-6 mb-4">
        <h5 class="fw-bold">Comunicate con nosotros</h5>
        
        <div class="whatsapp-status mb-2">
          <span class="status-dot" [class.online]="whatsappStatus.isOnline" 
                [class.offline]="!whatsappStatus.isOnline"></span>
          <small [class.text-success]="whatsappStatus.isOnline" 
                 [class.text-warning]="!whatsappStatus.isOnline">
            {{whatsappStatus.message}}
          </small>
        </div>

        <select class="form-select form-select-sm mb-2" #messageSelect
                (change)="selectMessage(whatsappMessages[messageSelect.selectedIndex])">
          <option *ngFor="let msg of whatsappMessages" [value]="msg.id">
            {{msg.title}}
          </option>
        </select>

        <a [href]="getWhatsAppHref()" 
           target="_blank" 
           class="btn w-100 whatsapp-btn">
          <i class="fab fa-whatsapp me-2"></i>
          {{whatsappStatus.isOnline ? 'Chatear Ahora' : 'Dejar Mensaje'}}
        </a>
        
        <small class="horario-atencion">
          <i class="fas fa-clock me-1"></i>
          {{whatsappStatus.horario}}
        </small>
      </div>
    </div>
    
    <hr class="my-4 bg-light">
    
    <div class="row align-items-center">
      <div class="col-md-6">
        <p class="mb-0">&copy; {{tiendaConfig?.nombre || 'Pinceletas'}}. Todos los derechos reservados.</p>
      </div>
      <div class="col-md-6 text-md-end">
        <!-- Espacio reservado para futuros elementos -->
      </div>
    </div>
  </div>
</footer>

<!-- Botón flotante de WhatsApp unificado -->
<div class="whatsapp-float" *ngIf="showWhatsAppFloat" [class.scrolled]="isScrolled">
  <div class="whatsapp-tooltip">
    <div class="tooltip-status">
      <span class="status-dot" [class.online]="whatsappStatus.isOnline" 
            [class.offline]="!whatsappStatus.isOnline"></span>
      {{whatsappStatus.isOnline ? '¡Disponible ahora!' : 'Fuera de horario'}}
    </div>
    <div class="tooltip-message">{{selectedMessage.title}}</div>
    <small>Click para cambiar consulta</small>
  </div>

  <!-- Botón único con opciones desplegables -->
  <div class="whatsapp-main-btn-container">
    <button class="whatsapp-main-btn" 
            [class.pulse]="whatsappStatus.isOnline"
            (click)="toggleMessageOptions()"
            title="Comunicate con nosotros">
      <i class="fab fa-whatsapp"></i>
    </button>

    <!-- Opciones desplegables -->
    <div class="message-options" *ngIf="showMessageOptions">
      <div class="options-header">
        <h6>Selecciona tu consulta</h6>
        <button class="btn-close-options" (click)="closeMessageOptions()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="options-list">
        <button *ngFor="let message of whatsappMessages" 
                class="message-option" 
                [class.active]="selectedMessage.id === message.id"
                (click)="selectMessage(message)">
          <i [class]="message.icon"></i>
          <span>{{message.title}}</span>
        </button>
      </div>
      <div class="options-footer">
        <a [href]="getWhatsAppHref()" 
           target="_blank" 
           class="btn w-100 whatsapp-send-btn"
           (click)="closeMessageOptions()">
          <i class="fab fa-whatsapp me-2"></i>
          {{whatsappStatus.isOnline ? 'Chatear Ahora' : 'Dejar Mensaje'}}
        </a>
      </div>
    </div>
  </div>

  <button class="whatsapp-close" (click)="toggleWhatsAppFloat()" title="Ocultar WhatsApp">
    <i class="fas fa-times"></i>
  </button>
</div>

<!-- Modal para mostrar términos y políticas -->
<div class="modal fade" id="politicasModal" tabindex="-1" aria-labelledby="politicasModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="politicasModalLabel">{{politicaModalTitle}}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div [innerHTML]="politicaModalContent" class="politicas-content"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>


<!-- Botón flotante de Chatbase a la izquierda -->
<div class="chatbase-float" *ngIf="showChatbaseFloat" [class.scrolled]="isScrolled">

  <!-- Animación de la mano -->
  <app-hand-wave-animation 
    [messages]="chatbaseMessages"
    [interval]="15000">
  </app-hand-wave-animation>
  
  <div class="chatbase-tooltip">
    <div class="tooltip-message">¿Necesitas ayuda?</div>
    <small>Asistente virtual IA</small>
  </div>

  <div class="chatbase-main-btn-container">
    <button class="chatbase-main-btn" 
            (click)="toggleChatbaseIframe()"
            title="Asistente Virtual">
      <i class="fas fa-robot"></i>
    </button>
  </div>

  <button class="chatbase-close" (click)="toggleChatbaseFloat()" title="Ocultar Asistente">
    <i class="fas fa-times"></i>
  </button>
</div>

<div class="chatbase-iframe-overlay" *ngIf="showChatbaseIframe" (click)="closeChatbaseIframe($event)">
  <div class="chatbase-iframe-container" (click)="$event.stopPropagation()">
    <button class="btn-close-iframe-top" (click)="toggleChatbaseIframe()">
      <i class="fas fa-times"></i>
    </button>
    <iframe
      src="https://www.chatbase.co/chatbot-iframe/WaCf9waYvpuYxl6gBV5Ji"
      width="100%"
      style="height: 100%; min-height: 500px"
      frameborder="0"
      class="chatbase-iframe"
      allow="microphone"
    ></iframe>
  </div>
</div>